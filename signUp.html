<!DOCTYPE html>
<html>
  <head>
    <link rel="icon" href="./assets/Logo.png" type="image/png" />
    <title>Sign Up</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="mainStyle.css" />
    <link rel="stylesheet" href="registerStyle.css" />
  </head>

  <body style="display: flex; margin: 0">
    <div
      style="
        width: 45%;
        background-color: #f0f6ff;
        height: 950px;
        align-items: center;
        display: flex;
        flex-direction: column;
        justify-content: center;
      "
    >
      <img src="assets/Vector.png" style="width: 555px" />
    </div>
    <div
      style="
        width: 55%;
        background: #fff;
        height: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
      "
    >
      <div style="align-self: flex-start">
        <nav class="header">
          <div class="nav-container">
            <a href="./index.html#whoWeAre" class="nav-link">Who We are</a>
            <a href="./index.html#solutions" class="nav-link">Our Solutions</a>
            <a href="./index.html#faqs" class="nav-link">FAQS</a>
            <a href="./resources.html" class="nav-link">Resources</a>
            <a href="./signIn.html" class="signup-button">Sign In</a>
          </div>
        </nav>
      </div>
      <div
        id="main-container"
        style="
          width: 60%;
          display: flex;
          flex-direction: column;
          align-items: left;
          padding: 18.5px 0px 18.5px 0px;
        "
      >
        <div
          style="width: 80%; display: flex; flex-direction: column; gap: 32px"
        >
          <div style="text-align: left; width: 100%; gap: 12px">
            <p
              style="
                font-size: 40px;
                font-style: normal;
                font-weight: 900;
                color: #7f28ff;
              "
            >
              Sign up
            </p>
            <p style="font-size: 18px; font-weight: 400; color: #969696">
              Sign up to access Blogs, Resources, and more!
            </p>
          </div>
          <div>
            <form
              style="
                gap: 20px;
                display: flex;
                flex-direction: column;
                align-items: flex-start;
              "
              id="createAccount"
            >
              <div style="display: flex; flex-direction: row; gap: 7vh">
                <div class="input-container" style="width: 40%">
                  <input
                    type="text"
                    id="first_name"
                    placeholder=" "
                    required
                    class="input-default"
                    style="width: 100%"
                  />
                  <label for="first_name">First name</label>
                </div>
                <div class="input-container" style="width: 40%">
                  <input
                    type="text"
                    id="last_name"
                    placeholder=" "
                    required
                    class="input-default"
                    style="width: 100%"
                  />
                  <label for="last_name">Last name</label>
                </div>
              </div>
              <div class="input-container">
                <input
                  type="tel"
                  id="phone"
                  placeholder=" "
                  required
                  class="input-default"
                />
                <label for="phone">Mobile Phone</label>
              </div>
              <div class="input-container">
                <input
                  type="email"
                  id="email"
                  placeholder=" "
                  required
                  class="input-default"
                />
                <label for="email">Email</label>
              </div>
              <div class="input-container">
                <input
                  type="password"
                  id="password"
                  placeholder=" "
                  required
                  class="input-default"
                />
                <label for="password">Password</label>
                <span id="password-error" class="error-message"></span>
                <!-- Error message span -->
              </div>
              <div class="input-container">
                <input
                  type="password"
                  id="re-password"
                  placeholder=" "
                  required
                  class="input-default"
                />
                <label for="re-password">Re-enter Password</label>
                <span id="re-password-error" class="error-message"></span>
                <!-- Error message span -->
              </div>

              <div style="align-self: stretch" class="input-container">
                <label
                  for="gender"
                  style="
                    top: -0.625rem;
                    left: 0.625rem;
                    font-size: 0.75rem;
                    color: #7f28ff;
                    background-color: #fff;
                    padding: 0 0.3125rem;
                  "
                  >Gender:</label
                >
                <select id="gender" name="gender" class="input-default">
                  <option value="" disabled selected hidden>
                    Choose your gender
                  </option>
                  <!-- Acts as a placeholder -->
                  <option value="male">Male</option>
                  <option value="female">Female</option>
                  <option value="other">Other</option>
                  <option value="prefer-not-say">Prefer not to say</option>
                </select>
              </div>
              <label
                class="terms"
                style="
                  display: flex;
                  flex-direction: row;
                  font-size: 14px;
                  font-style: normal;
                  font-weight: 400;
                  color: #b8bcca;
                "
              >
                <input type="checkbox" required style="margin-right: 8px" />
                <p>
                  I agree to the
                  <a href="#" style="color: #7f28ff">terms and conditions</a>
                </p>
              </label>
              <button
                style="
                  display: flex;
                  padding: 16px 8px;
                  justify-content: center;
                  align-items: center;
                  gap: 8px;
                  align-self: stretch;
                  border-radius: 10px;
                  background: #ff7415;
                  border: unset;
                "
                type="submit"
              >
                <p style="color: #fff; font-size: 18px; font-weight: 600">
                  Create Account
                </p>
              </button>
            </form>
          </div>
          <div style="align-self: center">
            <p style="color: #6c6c6c; font-size: 18px; font-weight: 400">
              Already have an account?
              <a style="color: #ff7415; font-weight: 600" href="./signIn.html"
                >Sign In</a
              >
            </p>
          </div>
        </div>
      </div>
    </div>
    <script>
      document
        .getElementById("createAccount")
        .addEventListener("submit", function (event) {
          event.preventDefault();

          const formData = {
            first_name: document.getElementById("first_name").value,
            last_name: document.getElementById("last_name").value,
            phone: document.getElementById("phone").value,
            email: document.getElementById("email").value,
            password: document.getElementById("password").value,
            gender: document.getElementById("gender").value,
            language: "en",
            notification_token: "",
            newsletter: 1,
          };

          // Call the API
          fetch(
            "https://q9fftuqvbp.us-east-1.awsapprunner.com/api/v1/authentication/register",
            {
              method: "POST",
              body: JSON.stringify(formData),
              headers: {
                "Content-Type": "application/json",
              },
            }
          )
            .then((response) => response.json())
            .then((data) => {
              console.log("Success:", data);
              alert("Account created succesfully");
            })
            .catch((error) => {
              console.error("Error:", error);
              alert("There was an error creating the account.");
            });
        });
    </script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const passwordInput = document.getElementById("password");
        const rePasswordInput = document.getElementById("re-password");
        const passwordError = document.getElementById("password-error");
        const rePasswordError = document.getElementById("re-password-error");

        const passwordRegex =
          /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;

        function validatePassword() {
          const password = passwordInput.value;
          if (!passwordRegex.test(password)) {
            passwordError.textContent =
              "Password must be at least 8 characters long, contain an uppercase letter, a number, and a special character.";
            passwordError.style.display = "block";
            return false;
          } else {
            passwordError.style.display = "none";
            return true;
          }
        }

        function validatePasswordMatch() {
          const password = passwordInput.value;
          const rePassword = rePasswordInput.value;

          if (password !== rePassword) {
            rePasswordError.textContent = "Passwords do not match.";
            rePasswordError.style.display = "block";
            return false;
          } else {
            rePasswordError.style.display = "none";
            return true;
          }
        }

        passwordInput.addEventListener("input", function () {
          validatePassword();
          validatePasswordMatch(); 
        });

        rePasswordInput.addEventListener("input", validatePasswordMatch);

        document
          .getElementById("createAccount")
          .addEventListener("submit", function (event) {
            if (!validatePassword() || !validatePasswordMatch()) {
              event.preventDefault(); 
            }
          });
      });
    </script>
  </body>
</html>
